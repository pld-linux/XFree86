--- xc/programs/Xserver/hw/xfree86/drivers/Imakefile~	Mon Jul  2 12:46:04 2001
+++ xc/programs/Xserver/hw/xfree86/drivers/Imakefile	Tue Apr 30 21:07:40 2002
@@ -14,7 +14,7 @@
        cyrix/?*_drv.o glint/?*_drv.o i128/?*_drv.o i740/?*_drv.o \
        i810/?*_drv.o imstt/?*_drv.o mga/?*_drv.o neomagic/?*_drv.o \
        nv/?*_drv.o rendition/?*_drv.o s3/?*_drv.o s3virge/?*_drv.o \
-       sis/?*_drv.o tdfx/?*_drv.o tga/?*_drv.o trident/?*_drv.o tseng/?*_drv.o \
+       sis/?*_drv.o tga/?*_drv.o trident/?*_drv.o tseng/?*_drv.o \
        vesa/?*_drv.o vga/?*_drv.o siliconmotion/?*.drv.o vmware/?*_drv.o
 
 #endif
--- xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/Makefile.kernel~	Thu Oct  4 20:28:22 2001
+++ xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/Makefile.kernel	Tue Apr 30 21:17:02 2002
@@ -3,10 +3,9 @@
 # Direct Rendering Infrastructure (DRI) in XFree86 4.1.0 and higher.
 
 O_TARGET	:= drm.o
-list-multi	:= gamma.o tdfx.o r128.o mga.o i810.o i830.o ffb.o radeon.o
+list-multi	:= gamma.o r128.o mga.o i810.o i830.o ffb.o radeon.o
 
 gamma-objs  := gamma_drv.o gamma_dma.o
-tdfx-objs   := tdfx_drv.o
 r128-objs   := r128_drv.o r128_cce.o r128_state.o
 mga-objs    := mga_drv.o mga_dma.o mga_state.o mga_warp.o
 i810-objs   := i810_drv.o i810_dma.o
@@ -15,7 +14,6 @@
 ffb-objs    := ffb_drv.o ffb_context.o
 
 obj-$(CONFIG_DRM_GAMMA) += gamma.o
-obj-$(CONFIG_DRM_TDFX)	+= tdfx.o
 obj-$(CONFIG_DRM_R128)	+= r128.o
 obj-$(CONFIG_DRM_RADEON)+= radeon.o
 obj-$(CONFIG_DRM_MGA)	+= mga.o
@@ -28,9 +26,6 @@
 gamma.o: $(gamma-objs) $(lib)
 	$(LD) -r -o $@ $(gamma-objs) $(lib)
 
-tdfx.o: $(tdfx-objs) $(lib)
-	$(LD) -r -o $@ $(tdfx-objs) $(lib)
-
 mga.o: $(mga-objs) $(lib)
 	$(LD) -r -o $@ $(mga-objs) $(lib)
 
--- xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/Makefile.linux~	Wed Jan 16 16:36:43 2002
+++ xc/programs/Xserver/hw/xfree86/os-support/linux/drm/kernel/Makefile.linux	Tue Apr 30 21:19:44 2002
@@ -38,7 +38,7 @@
 
 # **** End of SMP/MODVERSIONS detection
 
-MODS =		gamma.o tdfx.o r128.o radeon.o
+MODS =		gamma.o r128.o radeon.o
 LIBS =
 
 DRMTEMPLATES =	drm_auth.h drm_bufs.h drm_context.h drm_dma.h drm_drawable.h \
@@ -49,9 +49,6 @@
 GAMMAOBJS =	gamma_drv.o gamma_dma.o
 GAMMAHEADERS =	gamma_drv.h $(DRMHEADERS) $(DRMTEMPLATES)
 
-TDFXOBJS =	tdfx_drv.o
-TDFXHEADERS =	tdfx.h $(DRMHEADERS) $(DRMTEMPLATES)
-
 R128OBJS =	r128_drv.o r128_cce.o r128_state.o
 R128HEADERS =	r128.h r128_drv.h r128_drm.h $(DRMHEADERS) $(DRMTEMPLATES)
 
@@ -203,11 +200,6 @@
 gamma.o: $(GAMMAOBJS)
 	$(LD) -r $^ -o $@
 
-tdfx_drv.o: tdfx_drv.c
-	$(CC) $(MODCFLAGS) -DEXPORT_SYMTAB -I$(TREE) -c $< -o $@
-tdfx.o: $(TDFXOBJS) $(LIBS)
-	$(LD) -r $^ -o $@
-
 sis.o: $(SISOBJS) $(LIBS)
 	$(LD) -r $^ -o $@
 
@@ -253,7 +245,6 @@
 	$(CC) $(MODCFLAGS) -I$(TREE) -c $< -o $@
 
 $(GAMMAOBJS): $(GAMMAHEADERS)
-$(TDFXOBJS): $(TDFXHEADERS)
 ifeq ($(AGP),1)
 $(MGAOBJS): $(MGAHEADERS)
 $(I810OBJS): $(I810HEADERS)
--- ./xc/config/cf/xfree86.cf~	Tue Apr 30 21:46:25 2002
+++ ./xc/config/cf/xfree86.cf	Tue Apr 30 21:52:58 2002
@@ -306,7 +306,7 @@
 /* Pure PCI drivers should go first */
 # ifndef XF86CardDrivers
 #  define XF86CardDrivers	mga glint nv tga s3 s3virge sis rendition \
-				neomagic i740 tdfx savage \
+				neomagic i740 savage \
 				cirrus vmware tseng trident chips apm \
 				GlideDriver fbdev i128 \
 				ati AgpGartDrivers DevelDrivers ark cyrix \
@@ -319,7 +319,7 @@
 #  define TdfxDriDriver		/**/
 # endif
 # ifndef DriDrivers
-#  define DriDrivers		gamma TdfxDriDriver mga i810 i830 r128 radeon sis
+#  define DriDrivers		gamma mga i810 i830 r128 radeon sis
 # endif
 #endif
 
@@ -475,7 +475,7 @@
 
 # ifndef XF86CardDrivers
 #  define XF86CardDrivers	mga glint nv s3 s3virge sis savage \
-				trident chips tdfx fbdev ati \
+				trident chips fbdev ati \
 				DevelDrivers newport \
 				XF86OSCardDrivers XF86ExtraCardDrivers
 # endif
@@ -557,7 +557,7 @@
 
 /* Pure PCI drivers should go first */
 # ifndef XF86CardDrivers
-#  define XF86CardDrivers	mga tdfx glint s3 s3virge rendition tga ati \
+#  define XF86CardDrivers	mga glint s3 s3virge rendition tga ati \
 				savage nv DevelDrivers siliconmotion vga \
 				XF86OSCardDrivers XF86ExtraCardDrivers
 # endif
@@ -567,7 +567,7 @@
 #  define TdfxDriDriver		/**/
 # endif
 # ifndef DriDrivers
-#  define DriDrivers		gamma TdfxDriDriver mga r128 radeon sis
+#  define DriDrivers		gamma mga r128 radeon sis
 # endif
 #endif
 
@@ -663,7 +663,7 @@
 #  define TdfxDriDriver		/**/
 # endif
 # ifndef DriDrivers
-#  define DriDrivers		gamma TdfxDriDriver mga r128 radeon
+#  define DriDrivers		gamma mga r128 radeon
 # endif
 #endif
 
